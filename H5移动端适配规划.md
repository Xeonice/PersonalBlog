# H5 ç§»åŠ¨ç«¯é€‚é…è§„åˆ’æ–‡æ¡£

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

### 1.1 èƒŒæ™¯
å½“å‰ä¸ªäººåšå®¢ç½‘ç«™é‡‡ç”¨ PC ç«¯è®¾è®¡ï¼Œå·¦å³ä¸¤æ å¸ƒå±€ï¼Œå·¦ä¾§ä¸ºä¸ªäººä¿¡æ¯å’Œå¯¼èˆªï¼Œå³ä¾§ä¸ºå†…å®¹å±•ç¤ºåŒºã€‚åœ¨ç§»åŠ¨ç«¯éœ€è¦é‡æ–°è®¾è®¡äº¤äº’ä½“éªŒï¼Œä»¥é€‚åº”å°å±å¹•çš„ä½¿ç”¨åœºæ™¯ã€‚

### 1.2 ç›®æ ‡
- å°† PC ç«¯çš„ä¸¤æ å¸ƒå±€æ”¹ä¸ºç§»åŠ¨ç«¯çš„å•é¡µæ»šåŠ¨ä½“éªŒ
- å®ç°ç±»ä¼¼å¹´åº¦æŠ¥å‘Šçš„æ²‰æµ¸å¼é˜…è¯»ä½“éªŒ
- ä¿æŒ Galgame æ¨¡å¼çš„é€æ­¥å±•ç¤ºæ•ˆæœ
- ä¼˜åŒ–ç§»åŠ¨ç«¯çš„å¯¼èˆªäº¤äº’
- **ä¿æŒä¸ PC ç«¯çš„ä»£ç å…±ç”¨å’Œè·¯ç”±ä¸€è‡´æ€§**

## äºŒã€æ•´ä½“æ¶æ„è®¾è®¡

### 2.1 å“åº”å¼ç­–ç•¥
**æ ¸å¿ƒæ€è·¯**ï¼šä¸æ‹†åˆ†é¡µé¢æ–‡ä»¶ï¼Œè€Œæ˜¯åœ¨åŒä¸€ä¸ªé¡µé¢ç»„ä»¶å†…æ ¹æ®è®¾å¤‡ç±»å‹æ¸²æŸ“ä¸åŒçš„å¸ƒå±€ã€‚

```typescript
// é‡‡ç”¨ react-device-detect åº“è¿›è¡Œè®¾å¤‡æ£€æµ‹
import { useDeviceType } from '../hooks/useDeviceType';

const IndexPage = () => {
  const { isMobile, isTablet } = useDeviceType();

  // ç§»åŠ¨ç«¯å’Œå¹³æ¿ä½¿ç”¨ç§»åŠ¨å¸ƒå±€
  if (isMobile || isTablet) {
    return <MobileLayout />;
  }

  // æ¡Œé¢ç«¯ä½¿ç”¨ PC å¸ƒå±€
  return <DesktopLayout />;
};
```

### 2.2 ç§»åŠ¨ç«¯è™šæ‹Ÿåˆ†é¡µ
ç§»åŠ¨ç«¯åœ¨**åŒä¸€ä¸ªè·¯ç”±**ä¸‹å®ç° 6 ä¸ªè™šæ‹Ÿé¡µé¢ï¼š
1. **ç¬¬0é¡µ** - ä¸ªäººä¿¡æ¯å±•ç¤ºé¡µï¼ˆåŸ PC å·¦ä¾§å†…å®¹ï¼‰
2. **ç¬¬1é¡µ** - å…³äºæˆ‘å†…å®¹
3. **ç¬¬2é¡µ** - å·¥ä½œç»å†æ—¶é—´è½´
4. **ç¬¬3é¡µ** - ä¸ªäººä»·å€¼è§‚å’Œå‡†åˆ™
5. **ç¬¬4é¡µ** - æ–‡ç« åˆ—è¡¨å±•ç¤º
6. **ç¬¬5é¡µ** - è”ç³»æ–¹å¼

### 2.3 çŠ¶æ€ç®¡ç†
```typescript
// ç§»åŠ¨ç«¯é¡µé¢çŠ¶æ€
const [mobilePageIndex, setMobilePageIndex] = useState(0);
const [visitedPages, setVisitedPages] = useState<number[]>([0]);

// PC ç«¯ç»§ç»­ä½¿ç”¨åŸæœ‰çš„ section åˆ‡æ¢é€»è¾‘
const [currentSectionIndex, setCurrentSectionIndex] = useState(0);
```

### 2.4 è·¯ç”±å¤„ç†
```typescript
// ç§»åŠ¨ç«¯è·¯ç”±ç­–ç•¥ï¼šä¿æŒä¸ PC ç«¯ä¸€è‡´çš„è·¯ç”±ï¼Œæ”¯æŒåˆ†äº«å’Œ SEO
// ç§»åŠ¨ç«¯é¡µé¢åˆ‡æ¢æ—¶åŒæ­¥æ›´æ–°è·¯ç”±

const mobilePages = [
  { index: 0, route: '/', section: null },        // ç¬¬0é¡µï¼šä¸ªäººä¿¡æ¯é¡µï¼ˆæ— å¯¹åº”sectionï¼‰
  { index: 1, route: '/', section: 'about' },     // ç¬¬1é¡µï¼šå…³äºæˆ‘ï¼ˆé»˜è®¤è·¯ç”±ï¼‰
  { index: 2, route: '/experience', section: 'experience' }, // ç¬¬2é¡µï¼šç»å†
  { index: 3, route: '/principles', section: 'principles' }, // ç¬¬3é¡µï¼šå‡†åˆ™
  { index: 4, route: '/article-links', section: 'article-links' }, // ç¬¬4é¡µï¼šæ–‡ç« 
  { index: 5, route: '/contact', section: 'contact' }  // ç¬¬5é¡µï¼šè”ç³»
];

// é¡µé¢åˆ‡æ¢æ—¶æ›´æ–°è·¯ç”±
const handlePageChange = (newPageIndex: number) => {
  setCurrentPage(newPageIndex);
  const pageConfig = mobilePages[newPageIndex];

  // æ›´æ–°è·¯ç”±ï¼ˆä¸è§¦å‘é¡µé¢åˆ·æ–°ï¼‰
  if (pageConfig.route !== router.pathname) {
    router.push(pageConfig.route, undefined, { shallow: true });
  }
};

// æ ¹æ®å½“å‰è·¯ç”±åˆå§‹åŒ–é¡µé¢
useEffect(() => {
  const currentRoute = router.pathname;
  const pageConfig = mobilePages.find(p => p.route === currentRoute);

  if (pageConfig) {
    // å¦‚æœæ˜¯é¦–é¡µè·¯ç”±ï¼Œé»˜è®¤æ˜¾ç¤ºç¬¬1é¡µï¼ˆå…³äºæˆ‘ï¼‰
    setCurrentPage(currentRoute === '/' ? 1 : pageConfig.index);
  }
}, [router.pathname]);
```

### 2.5 æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Next.js + React
- **åŠ¨ç”»**: Framer Motion
- **æ‰‹åŠ¿**: @use-gesture/react æˆ– react-swipeable
- **æ ·å¼**: CSS Modules + Tailwind CSS
- **çŠ¶æ€ç®¡ç†**: React Context

## ä¸‰ã€è¯¦ç»†è®¾è®¡æ–¹æ¡ˆ

### 3.1 ç§»åŠ¨ç«¯ç»„ä»¶æ¶æ„

```typescript
// MobileLayout ç»„ä»¶å®ç°
import { useRouter } from 'next/router';
import { useState, useEffect } from 'react';
import { AnimatePresence } from 'framer-motion';
import { useConfig } from '../../hooks/useConfig';
import MobileFirstPage from '../MobileFirstPage';
import MobileGalgamePage from '../MobileGalgamePage';
import MobileNavButton from '../MobileNavButton';

const mobilePages = [
  { index: 0, route: '/', section: null },
  { index: 1, route: '/', section: 'about' },
  { index: 2, route: '/experience', section: 'experience' },
  { index: 3, route: '/principles', section: 'principles' },
  { index: 4, route: '/article-links', section: 'article-links' },
  { index: 5, route: '/contact', section: 'contact' }
];

const MobileLayout = ({ defaultSection }) => {
  const router = useRouter();
  const [currentPage, setCurrentPage] = useState(0);
  const { config } = useConfig();

  // æ ¹æ®è·¯ç”±åˆå§‹åŒ–é¡µé¢
  useEffect(() => {
    const pathname = router.pathname === '/[[...slug]]' ? '/' : router.pathname;
    const page = mobilePages.find(p => p.route === pathname);
    if (page) {
      setCurrentPage(pathname === '/' && defaultSection === 'about' ? 1 : page.index);
    }
  }, [router.pathname, defaultSection]);

  // è·¯ç”±åŒæ­¥é€»è¾‘
  const navigateToPage = (pageIndex: number) => {
    setCurrentPage(pageIndex);

    // æ›´æ–°è·¯ç”±
    const targetRoute = mobilePages[pageIndex].route;
    if (targetRoute !== router.pathname) {
      router.push(targetRoute, undefined, { shallow: true });
    }
  };

  // å¤„ç†ä¸‹æ»‘è¿›å…¥ç¬¬äºŒé¡µ
  const handleSwipeDown = () => {
    navigateToPage(1);
  };

  // å¤„ç†é¡µé¢åˆ‡æ¢
  const handleNextPage = () => {
    if (currentPage < 5) {
      navigateToPage(currentPage + 1);
    }
  };

  return (
    <AnimatePresence mode="wait">
      {currentPage === 0 && (
        <MobileFirstPage
          onSwipeDown={handleSwipeDown}
          config={config}
        />
      )}
      {currentPage > 0 && (
        <MobileGalgamePage
          pageIndex={currentPage}
          section={config?.sections[mobilePages[currentPage].section]}
          onNextPage={handleNextPage}
          totalPages={6}
        />
      )}
      <MobileNavButton
        currentPage={currentPage}
        onNavigate={navigateToPage}
        navigation={config?.navigation}
      />
    </AnimatePresence>
  );
};

export default MobileLayout;
```

### 3.2 ç¬¬ä¸€é¡µ - é¦–é¡µè®¾è®¡

#### å¸ƒå±€è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚                     â”‚
â”‚     [å¤´åƒ/Logo]     â”‚
â”‚                     â”‚
â”‚      Douglas        â”‚
â”‚     äº§å“å·¥ç¨‹å¸ˆ       â”‚
â”‚                     â”‚
â”‚   æ¬¢è¿æ¥åˆ°æˆ‘çš„      â”‚
â”‚     è‡ªç•™åœ°          â”‚
â”‚                     â”‚
â”‚                     â”‚
â”‚    ç¤¾äº¤å›¾æ ‡ç»„        â”‚
â”‚  [GitHub] [Twitter]  â”‚
â”‚                     â”‚
â”‚                     â”‚
â”‚   â†“ å‘ä¸‹æ»‘åŠ¨å¼€å§‹ â†“   â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### äº¤äº’è®¾è®¡
- **è¿›å…¥åŠ¨ç”»**: æ–‡å­—æ¸æ˜¾ + ä¸Šæ»‘æ•ˆæœ
- **ä¸‹æ»‘è§¦å‘**:
  - æ˜¾ç¤ºä¸‹æ»‘æç¤ºåŠ¨ç”»ï¼ˆç®­å¤´è„‰å†²æ•ˆæœï¼‰
  - ç›‘å¬ä¸‹æ»‘æ‰‹åŠ¿ï¼Œè§¦å‘é¡µé¢åˆ‡æ¢
  - åˆ‡æ¢æ—¶æ•´é¡µä¸Šç§»æ·¡å‡ºï¼Œä¸‹ä¸€é¡µä»åº•éƒ¨è¿›å…¥

#### å…³é”®å®ç°
```typescript
// æ‰‹åŠ¿æ£€æµ‹
const bind = useGesture({
  onWheel: ({ direction: [, y] }) => {
    if (y > 0 && currentPage === 0) {
      // è§¦å‘è¿›å…¥ç¬¬äºŒé¡µ
      setCurrentPage(1);
    }
  },
  onDrag: ({ direction: [, y], distance: [, dy] }) => {
    if (dy > 50 && currentPage === 0) {
      // æ‰‹æŒ‡ä¸‹æ»‘è¶…è¿‡50pxè§¦å‘
      setCurrentPage(1);
    }
  }
});
```

### 3.2 ç¬¬äºŒé¡µè‡³ç¬¬å…­é¡µ - Galgame æ¨¡å¼

#### å¸ƒå±€è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   [ç« èŠ‚æ ‡é¢˜]        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                     â”‚
â”‚   å†…å®¹å±•ç¤ºåŒºåŸŸ       â”‚
â”‚                     â”‚
â”‚  - æ–‡å­—é€è¡Œæ˜¾ç¤º     â”‚
â”‚  - æ—¶é—´è½´å¡ç‰‡       â”‚
â”‚  - åˆ—è¡¨é¡¹           â”‚
â”‚  - æ–‡ç« å¡ç‰‡         â”‚
â”‚  - è”ç³»æ–¹å¼å¡ç‰‡     â”‚
â”‚                     â”‚
â”‚                     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  [æç¤º] [ç‚¹å‡»ç»§ç»­]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### äº¤äº’è®¾è®¡
- **è¿›å…¥åŠ¨ç”»**: ç« èŠ‚æ ‡é¢˜æ‰“å­—æœºæ•ˆæœ
- **å†…å®¹å±•ç¤º**:
  - æ–‡æœ¬ç±»ï¼šé€æ®µ/é€è¡Œæ˜¾ç¤ºï¼Œæ”¯æŒç‚¹å‡»å¿«è¿›
  - å¡ç‰‡ç±»ï¼šæ»šåŠ¨è§¦å‘æ¸æ˜¾åŠ¨ç”»
- **é¡µé¢åˆ‡æ¢**: ç‚¹å‡»ä»»æ„ä½ç½®è§¦å‘ä¸‹ä¸€é¡µï¼ˆæœ€åæ˜¾ç¤º"ç‚¹å‡»ç»§ç»­"æŒ‰é’®ï¼‰

### 3.3 å¯¼èˆªèœå•è®¾è®¡

#### å¸ƒå±€è®¾è®¡
```
å›ºå®šæŒ‰é’®ï¼ˆå·¦ä¸‹è§’ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ â‰¡    â”‚  <- ç‚¹å‡»å±•å¼€
â””â”€â”€â”€â”€â”€â”€â”˜

å±•å¼€åçš„èœå•ï¼ˆå…¨å±é®ç½©ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚
â”‚    Ã— å…³é—­           â”‚
â”‚                     â”‚
â”‚    å…³äºæˆ‘           â”‚
â”‚    ç»å†             â”‚
â”‚    ä¸ªäººå‡†åˆ™         â”‚
â”‚    æ–‡ç«              â”‚
â”‚    è”ç³»             â”‚
â”‚                     â”‚
â”‚  [ä¸»é¢˜åˆ‡æ¢æŒ‰é’®]     â”‚
â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### äº¤äº’è®¾è®¡
- **è§¦å‘æ–¹å¼**: ç‚¹å‡»å·¦ä¸‹è§’å›ºå®šæŒ‰é’®
- **å±•å¼€åŠ¨ç”»**:
  - èƒŒæ™¯æ¨¡ç³Šé®ç½©æ·¡å…¥
  - èœå•é¡¹ä»ä¸‹å¾€ä¸Šä¾æ¬¡å¼¹å‡ºï¼ˆstaggeråŠ¨ç”»ï¼‰
- **åŠŸèƒ½**:
  - å¿«é€Ÿè·³è½¬åˆ°ä»»æ„ç« èŠ‚
  - ä¸»é¢˜åˆ‡æ¢
  - å½“å‰ç« èŠ‚é«˜äº®æ˜¾ç¤º

#### åŠ¨ç”»é…ç½®
```typescript
const menuVariants = {
  closed: {
    opacity: 0,
    scale: 0,
    transition: {
      staggerChildren: 0.05,
      staggerDirection: -1
    }
  },
  open: {
    opacity: 1,
    scale: 1,
    transition: {
      staggerChildren: 0.07,
      delayChildren: 0.2
    }
  }
};

const menuItemVariants = {
  closed: { opacity: 0, y: 50 },
  open: { opacity: 1, y: 0 }
};
```

## å››ã€PC/H5 ç«¯åŒºåˆ†ç­–ç•¥

### 4.1 è®¾å¤‡æ£€æµ‹å®Œæ•´æ–¹æ¡ˆ

#### 4.1.1 è®¾å¤‡æ£€æµ‹æ–¹æ¡ˆå¯¹æ¯”

##### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ react-device-detectï¼ˆæ¨èï¼‰
```bash
npm install react-device-detect
```

```typescript
// hooks/useDeviceType.ts
import {
  isMobile,
  isTablet,
  isDesktop,
  isBrowser,
  isIOS,
  isAndroid,
  browserName,
  osName,
  deviceType,
  MobileView,
  BrowserView,
  TabletView,
  isMobileOnly,
  isTabletOnly
} from 'react-device-detect';

// æ–¹å¼1ï¼šç›´æ¥ä½¿ç”¨ç»„ä»¶
const App = () => {
  return (
    <>
      <BrowserView>
        <DesktopLayout />
      </BrowserView>
      <MobileView>
        <MobileLayout />
      </MobileView>
      <TabletView>
        <TabletLayout />
      </TabletView>
    </>
  );
};

// æ–¹å¼2ï¼šä½¿ç”¨å˜é‡åˆ¤æ–­
export const useDeviceType = () => {
  const [isClient, setIsClient] = useState(false);

  useEffect(() => {
    setIsClient(true);
  }, []);

  return {
    isMobile: isClient && isMobileOnly,  // çº¯ç§»åŠ¨ç«¯ï¼Œä¸åŒ…å«å¹³æ¿
    isTablet: isClient && isTabletOnly,
    isDesktop: isClient && isDesktop,
    isTouchDevice: isClient && (isMobile || isTablet),
    isIOS,
    isAndroid,
    deviceType,
    isClient
  };
};
```

**ä¼˜ç‚¹**ï¼š
- ğŸ“¦ è½»é‡ï¼ˆ~14KB gzippedï¼‰
- ğŸ¯ å‡†ç¡®åº¦é«˜ï¼Œç»´æŠ¤è‰¯å¥½
- ğŸ”§ æä¾›ç»„ä»¶å’Œ Hook ä¸¤ç§æ–¹å¼
- ğŸ“± è¯¦ç»†çš„è®¾å¤‡ä¿¡æ¯ï¼ˆOSã€æµè§ˆå™¨ç­‰ï¼‰
- âœ… SSR å‹å¥½

**ç¼ºç‚¹**ï¼š
- ä¸ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼ˆéœ€è¦é¢å¤–å¤„ç†ï¼‰

##### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ react-use çš„ useMedia
```bash
npm install react-use
```

```typescript
// hooks/useDeviceType.ts
import { useMedia } from 'react-use';

export const useDeviceType = () => {
  // å“åº”å¼åª’ä½“æŸ¥è¯¢
  const isMobile = useMedia('(max-width: 767px)');
  const isTablet = useMedia('(min-width: 768px) and (max-width: 1023px)');
  const isDesktop = useMedia('(min-width: 1024px)');
  const isTouchDevice = useMedia('(hover: none) and (pointer: coarse)');

  return {
    isMobile,
    isTablet,
    isDesktop,
    isTouchDevice,
    isClient: true  // useMedia å·²å¤„ç† SSR
  };
};
```

**ä¼˜ç‚¹**ï¼š
- ğŸ¯ åŸºäº CSS åª’ä½“æŸ¥è¯¢ï¼Œä¸æ ·å¼æ–­ç‚¹ä¸€è‡´
- ğŸ“ å®æ—¶å“åº”çª—å£å˜åŒ–
- ğŸš€ react-use åŒ…å«å¤§é‡å®ç”¨ hooks

**ç¼ºç‚¹**ï¼š
- åŒ…ä½“ç§¯è¾ƒå¤§ï¼ˆå¦‚æœåªç”¨è¿™ä¸€ä¸ªåŠŸèƒ½ï¼‰
- æ— æ³•è·å–å…·ä½“è®¾å¤‡ä¿¡æ¯

##### æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ @react-hook/media-query
```bash
npm install @react-hook/media-query
```

```typescript
// hooks/useDeviceType.ts
import { useMediaQuery, useMediaQueries } from '@react-hook/media-query';

export const useDeviceType = () => {
  const matches = useMediaQueries({
    mobile: '(max-width: 767px)',
    tablet: '(min-width: 768px) and (max-width: 1023px)',
    desktop: '(min-width: 1024px)',
    touch: '(hover: none) and (pointer: coarse)',
  });

  return {
    isMobile: matches.mobile,
    isTablet: matches.tablet,
    isDesktop: matches.desktop,
    isTouchDevice: matches.touch,
    isClient: true
  };
};
```

**ä¼˜ç‚¹**ï¼š
- ğŸª¶ è¶…è½»é‡ï¼ˆ~2KBï¼‰
- ğŸ“ å“åº”å¼
- ğŸ¯ ä¸“æ³¨åª’ä½“æŸ¥è¯¢

**ç¼ºç‚¹**ï¼š
- åŠŸèƒ½å•ä¸€ï¼Œæ— è®¾å¤‡ä¿¡æ¯

##### æ–¹æ¡ˆå››ï¼šç»„åˆæ–¹æ¡ˆï¼ˆæœ€ä½³å®è·µï¼‰
```typescript
// hooks/useDeviceType.ts
import { isMobileOnly, isTablet as isTabletDetect } from 'react-device-detect';
import { useMedia } from 'react-use';
import { useEffect, useState } from 'react';

export const useDeviceType = () => {
  const [isClient, setIsClient] = useState(false);

  // ä½¿ç”¨ react-device-detect è¿›è¡Œåˆå§‹æ£€æµ‹
  const initialMobile = isMobileOnly;
  const initialTablet = isTabletDetect;

  // ä½¿ç”¨åª’ä½“æŸ¥è¯¢è¿›è¡Œå“åº”å¼æ£€æµ‹
  const responsiveMobile = useMedia('(max-width: 767px)', initialMobile);
  const responsiveTablet = useMedia(
    '(min-width: 768px) and (max-width: 1023px)',
    initialTablet
  );

  useEffect(() => {
    setIsClient(true);
  }, []);

  // ç»“åˆä¸¤ç§æ£€æµ‹æ–¹å¼
  const isMobile = isClient && (initialMobile || responsiveMobile);
  const isTablet = isClient && (initialTablet || responsiveTablet);
  const isDesktop = isClient && !isMobile && !isTablet;

  return {
    isMobile,
    isTablet,
    isDesktop,
    isTouchDevice: isMobile || isTablet,
    isClient
  };
};
```

**æ¨èä½¿ç”¨ react-device-detectï¼Œç†ç”±**ï¼š
1. ä¸“é—¨ä¸ºè®¾å¤‡æ£€æµ‹è®¾è®¡
2. ç»´æŠ¤æ´»è·ƒï¼Œå…¼å®¹æ€§å¥½
3. SSR å‹å¥½
4. æä¾›ä¸°å¯Œçš„è®¾å¤‡ä¿¡æ¯

å¦‚éœ€å“åº”å¼æ”¯æŒï¼Œå¯é…åˆ window.matchMedia ç›‘å¬ï¼š

```typescript
// å¢å¼ºç‰ˆï¼šæ·»åŠ å“åº”å¼æ”¯æŒ
export const useResponsiveDevice = () => {
  const device = useDeviceType();
  const [windowWidth, setWindowWidth] = useState(
    typeof window !== 'undefined' ? window.innerWidth : 0
  );

  useEffect(() => {
    const handleResize = () => setWindowWidth(window.innerWidth);
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  // è¦†ç›–åˆ¤æ–­ï¼šçª—å£å¤§å°ä¼˜å…ˆ
  return {
    ...device,
    isMobile: device.isMobile || windowWidth < 768,
    isTablet: device.isTablet || (windowWidth >= 768 && windowWidth < 1024),
    isDesktop: device.isDesktop || windowWidth >= 1024,
  };
};
```

#### 4.1.2 SSR å®‰å…¨å¤„ç†
```typescript
// pages/[[...slug]].tsx
const IndexPage = ({ initialDeviceType }) => {
  const deviceInfo = useDeviceType();
  const [isHydrated, setIsHydrated] = useState(false);

  useEffect(() => {
    setIsHydrated(true);
  }, []);

  // ä¸‰æ®µå¼æ¸²æŸ“ç­–ç•¥
  if (!isHydrated) {
    // 1. SSR/åˆå§‹æ¸²æŸ“ï¼šä½¿ç”¨æœåŠ¡ç«¯æ£€æµ‹ç»“æœ
    return initialDeviceType === 'mobile' ?
      <MobileLayoutSkeleton /> : // è½»é‡çº§éª¨æ¶å±
      <DesktopLayout />;          // å®Œæ•´ PC ç‰ˆï¼ˆSEO å‹å¥½ï¼‰
  }

  // 2. å®¢æˆ·ç«¯æ°´åˆåï¼šæ ¹æ®å®é™…è®¾å¤‡æ¸²æŸ“
  if (deviceInfo.isMobile) {
    return <MobileLayout />;
  }

  if (deviceInfo.isTablet) {
    // å¹³æ¿å¯é€‰æ‹©æ€§å±•ç¤ºç§»åŠ¨ç«¯æˆ– PC ç«¯
    return <TabletLayout />; // æˆ– <MobileLayout />
  }

  // 3. æ¡Œé¢ç«¯
  return <DesktopLayout />;
};

// æœåŠ¡ç«¯è®¾å¤‡æ£€æµ‹
export const getStaticProps = async ({ req }) => {
  // æœåŠ¡ç«¯åŸºäº User-Agent çš„åˆæ­¥åˆ¤æ–­
  const userAgent = req?.headers?.['user-agent'] || '';
  const isMobileUA = /mobile|android|iphone/i.test(userAgent);

  return {
    props: {
      initialDeviceType: isMobileUA ? 'mobile' : 'desktop',
      // ... å…¶ä»– props
    }
  };
};
```

### 4.2 å†…å®¹éš”ç¦»ç­–ç•¥

#### 4.2.1 ç»„ä»¶çº§éš”ç¦»
```typescript
// å®Œå…¨ç‹¬ç«‹çš„ç»„ä»¶æ ‘ï¼Œé¿å…æ ·å¼å’Œé€»è¾‘å†²çª

// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ··ç”¨ç»„ä»¶
const BadExample = () => {
  const { isMobile } = useDeviceType();
  return (
    <SharedComponent className={isMobile ? 'mobile' : 'desktop'} />
  );
};

// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šç‹¬ç«‹ç»„ä»¶
const GoodExample = () => {
  const { isMobile } = useDeviceType();
  return isMobile ? <MobileComponent /> : <DesktopComponent />;
};
```

#### 4.2.2 æ ·å¼å®Œå…¨éš”ç¦»
```scss
// âŒ é¿å…ï¼šä½¿ç”¨åª’ä½“æŸ¥è¯¢æ··åˆæ ·å¼
.component {
  padding: 32px;
  @media (max-width: 768px) {
    padding: 16px;
  }
}

// âœ… æ¨èï¼šç‹¬ç«‹çš„æ ·å¼æ–‡ä»¶
// desktop.module.css
.desktopContainer {
  padding: 32px;
  display: flex;
  gap: 24px;
}

// mobile.module.css
.mobileContainer {
  padding: 16px;
  display: block;
}
```

#### 4.2.3 äº‹ä»¶å¤„ç†éš”ç¦»
```typescript
// ç§»åŠ¨ç«¯ä¸“ç”¨äº‹ä»¶
const MobileComponent = () => {
  const handleTouch = useTouchEvents();
  const handleSwipe = useSwipeGesture();

  return <div onTouchStart={handleTouch} />;
};

// PC ç«¯ä¸“ç”¨äº‹ä»¶
const DesktopComponent = () => {
  const handleMouse = useMouseEvents();
  const handleKeyboard = useKeyboardShortcuts();

  return <div onMouseEnter={handleMouse} />;
};
```

### 4.3 é˜²æ­¢å†…å®¹æ··æ·†ç­–ç•¥

#### 4.3.1 è¿è¡Œæ—¶ä¿æŠ¤
```typescript
// é˜²æ­¢è®¾å¤‡ç±»å‹åˆ‡æ¢æ—¶çš„å†…å®¹æ··ä¹±
const useDeviceProtection = () => {
  const [lockedDevice, setLockedDevice] = useState(null);

  useEffect(() => {
    // é¦–æ¬¡æ£€æµ‹åé”å®šè®¾å¤‡ç±»å‹
    if (!lockedDevice) {
      const device = detectDeviceType();
      setLockedDevice(device);

      // å­˜å‚¨åˆ° sessionStorage é˜²æ­¢åˆ·æ–°å˜åŒ–
      sessionStorage.setItem('device-type', device);
    }
  }, []);

  return lockedDevice;
};
```

#### 4.3.2 è°ƒè¯•æ¨¡å¼
```typescript
// å¼€å‘ç¯å¢ƒä¸‹çš„è®¾å¤‡åˆ‡æ¢å·¥å…·
const DeviceDebugger = () => {
  if (process.env.NODE_ENV !== 'development') return null;

  return (
    <div className="device-debugger">
      <button onClick={() => forceDevice('mobile')}>å¼ºåˆ¶ç§»åŠ¨ç«¯</button>
      <button onClick={() => forceDevice('desktop')}>å¼ºåˆ¶æ¡Œé¢ç«¯</button>
      <button onClick={() => forceDevice('auto')}>è‡ªåŠ¨æ£€æµ‹</button>
    </div>
  );
};
```

### 4.4 è¾¹ç•Œæƒ…å†µå¤„ç†

#### 4.4.1 æ¨ªç«–å±åˆ‡æ¢
```typescript
// ç§»åŠ¨ç«¯æ¨ªå±æ—¶çš„å¤„ç†
const handleOrientationChange = () => {
  const isLandscape = window.orientation === 90 || window.orientation === -90;

  if (isLandscape && deviceInfo.isMobile) {
    // é€‰é¡¹1ï¼šæç¤ºç”¨æˆ·æ—‹è½¬è®¾å¤‡
    showRotateHint();

    // é€‰é¡¹2ï¼šåˆ‡æ¢åˆ°ç®€åŒ–å¸ƒå±€
    setLayoutMode('landscape-mobile');
  }
};
```

#### 4.4.2 å¹³æ¿è®¾å¤‡å¤„ç†
```typescript
// å¹³æ¿è®¾å¤‡çš„ç‰¹æ®Šå¤„ç†
const TabletLayout = () => {
  // å¹³æ¿å¯ä»¥é€‰æ‹©æ€§åœ°æ˜¾ç¤ºï¼š
  // 1. ç§»åŠ¨ç«¯å¸ƒå±€ï¼ˆæ¨èï¼‰
  // 2. PC ç«¯å¸ƒå±€ï¼ˆå¦‚æœå±å¹•è¶³å¤Ÿå¤§ï¼‰
  // 3. ä¸“é—¨çš„å¹³æ¿å¸ƒå±€

  const width = window.innerWidth;

  if (width >= 1024) {
    return <DesktopLayout compact />;
  }

  return <MobileLayout enhanced />;
};
```

## äº”ã€å“åº”å¼æ–­ç‚¹ç­–ç•¥

### 5.1 æ–­ç‚¹å®šä¹‰
```scss
// ç§»åŠ¨ç«¯å®šä¹‰
$mobile-small: 320px;  // å°å±æ‰‹æœº
$mobile-medium: 375px; // æ ‡å‡†æ‰‹æœº
$mobile-large: 414px;  // å¤§å±æ‰‹æœº
$tablet: 768px;        // å¹³æ¿
$desktop: 1024px;      // æ¡Œé¢ç«¯åˆ†ç•Œç‚¹

// ä½¿ç”¨ç­–ç•¥
@media (max-width: $tablet - 1px) {
  // H5 ç§»åŠ¨ç«¯æ ·å¼
}

@media (min-width: $tablet) {
  // PC ç«¯æ ·å¼
}
```

### 5.2 CSS ç­–ç•¥
```scss
// ä¼˜å…ˆç§»åŠ¨ç«¯ï¼ˆMobile Firstï¼‰
.component {
  // ç§»åŠ¨ç«¯åŸºç¡€æ ·å¼
  padding: 16px;

  // å¹³æ¿ç«¯å¢å¼º
  @media (min-width: 768px) {
    padding: 24px;
  }

  // PC ç«¯å®Œæ•´æ ·å¼
  @media (min-width: 1024px) {
    padding: 32px;
  }
}
```

## å…­ã€åŠ¨æ•ˆè®¾è®¡è§„èŒƒ

### 6.1 é¡µé¢åˆ‡æ¢åŠ¨æ•ˆ
```typescript
const pageTransition = {
  initial: { opacity: 0, y: 100 },
  animate: {
    opacity: 1,
    y: 0,
    transition: {
      duration: 0.6,
      ease: [0.645, 0.045, 0.355, 1]
    }
  },
  exit: {
    opacity: 0,
    y: -100,
    transition: {
      duration: 0.4
    }
  }
};
```

### 6.2 å†…å®¹å±•ç¤ºåŠ¨æ•ˆ
- **æ–‡å­—æ‰“å­—æœº**: 40-60å­—/ç§’
- **å¡ç‰‡è¿›å…¥**: 0.4s æ¸æ˜¾ä¸Šç§»
- **æŒ‰é’®æ‚¬æµ®**: scale(1.05) + é˜´å½±å¢å¼º
- **åŠ è½½åŠ¨ç”»**: éª¨æ¶å±æˆ–è¿›åº¦æ¡

## ä¸ƒã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 7.1 ä»£ç å±‚é¢
- **ç»„ä»¶æ‡’åŠ è½½**: ä½¿ç”¨ dynamic import
- **è™šæ‹Ÿæ»šåŠ¨**: é•¿åˆ—è¡¨ä½¿ç”¨ react-window
- **é˜²æŠ–èŠ‚æµ**: æ‰‹åŠ¿å’Œæ»šåŠ¨äº‹ä»¶ä¼˜åŒ–
- **Memoä¼˜åŒ–**: é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

### 7.2 èµ„æºä¼˜åŒ–
- **å›¾ç‰‡ä¼˜åŒ–**:
  - ä½¿ç”¨ next/image è‡ªåŠ¨ä¼˜åŒ–
  - WebP æ ¼å¼æ”¯æŒ
  - æ‡’åŠ è½½å®ç°
- **å­—ä½“ä¼˜åŒ–**:
  - ä½¿ç”¨ next/font ä¼˜åŒ–åŠ è½½
  - subset ä¸­æ–‡å­—ä½“

### 7.3 åŠ¨ç”»ä¼˜åŒ–
```typescript
// ä½¿ç”¨ will-change ä¼˜åŒ–
const optimizedAnimation = {
  initial: { opacity: 0 },
  animate: {
    opacity: 1,
    transition: { duration: 0.3 }
  },
  style: { willChange: 'opacity' }
};

// ä½¿ç”¨ transform è€Œé position
const slideAnimation = {
  initial: { transform: 'translateY(100%)' },
  animate: { transform: 'translateY(0%)' }
};
```

## å…«ã€å®ç°è®¡åˆ’

### Phase 1: åŸºç¡€æ¶æ„ï¼ˆç¬¬1-2å¤©ï¼‰
- [ ] å®‰è£… react-device-detect å’Œå…¶ä»–ä¾èµ–
- [ ] å®ç° useDeviceType Hookï¼ˆåŸºäº react-device-detectï¼‰
- [ ] ä¿®æ”¹ [[...slug]].tsx æ·»åŠ è®¾å¤‡æ£€æµ‹
- [ ] åˆ›å»º MobileLayout åŸºç¡€æ¡†æ¶
- [ ] å¤„ç† SSR/CSR æ°´åˆé—®é¢˜

### Phase 2: ç§»åŠ¨ç«¯é¦–é¡µï¼ˆç¬¬3-4å¤©ï¼‰
- [ ] MobileFirstPage ç»„ä»¶å¼€å‘
- [ ] ä¸‹æ»‘æ‰‹åŠ¿æ£€æµ‹å®ç°
- [ ] é¡µé¢åˆ‡æ¢åŠ¨ç”»
- [ ] å“åº”å¼ç¤¾äº¤å›¾æ ‡

### Phase 3: ç§»åŠ¨ç«¯Galgameé¡µé¢ï¼ˆç¬¬5-7å¤©ï¼‰
- [ ] MobileGalgamePage ç»„ä»¶
- [ ] ç§»åŠ¨ç«¯å†…å®¹ç»„ä»¶é€‚é…
- [ ] è™šæ‹Ÿåˆ†é¡µé€»è¾‘
- [ ] é¡µé¢é—´è½¬åœºåŠ¨ç”»

### Phase 4: ç§»åŠ¨ç«¯å¯¼èˆªï¼ˆç¬¬8-9å¤©ï¼‰
- [ ] MobileNavButton ç»„ä»¶
- [ ] MobileMenu å…¨å±èœå•
- [ ] é¡µé¢è·³è½¬é€»è¾‘
- [ ] å½“å‰é¡µé¢æŒ‡ç¤ºå™¨

### Phase 5: é›†æˆæµ‹è¯•ï¼ˆç¬¬10-12å¤©ï¼‰
- [ ] PC/H5 åˆ‡æ¢æµ‹è¯•
- [ ] è·¯ç”±åŒæ­¥éªŒè¯
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] è·¨æµè§ˆå™¨å…¼å®¹æ€§

## ä¹ã€æŠ€æœ¯è¦ç‚¹

### 9.1 æ ¸å¿ƒä¾èµ–
```json
{
  "dependencies": {
    "react-device-detect": "^2.2.3",
    "framer-motion": "^11.x",
    "@use-gesture/react": "^10.x",
    "react-intersection-observer": "^9.x"
  }
}
```

```bash
# å®‰è£…å‘½ä»¤
npm install react-device-detect framer-motion @use-gesture/react react-intersection-observer
```

### 9.2 æ–‡ä»¶ç»“æ„è¯¦ç»†è¯´æ˜

#### éœ€è¦ä¿®æ”¹çš„ç°æœ‰æ–‡ä»¶ï¼š

```
src/pages/[[...slug]].tsx  â­ ä¸»è¦ä¿®æ”¹
â”œâ”€â”€ æ·»åŠ è®¾å¤‡æ£€æµ‹é€»è¾‘
â”œâ”€â”€ æ¡ä»¶æ¸²æŸ“ MobileLayout æˆ–ç°æœ‰ PC å¸ƒå±€
â””â”€â”€ å¤„ç† SSR/CSR æ°´åˆé—®é¢˜

src/components/GalgameSection/  âœï¸ è½»å¾®è°ƒæ•´
â”œâ”€â”€ index.tsx - æ·»åŠ ç§»åŠ¨ç«¯é€‚é…æ ·å¼
â””â”€â”€ index.module.css - å“åº”å¼æ ·å¼è°ƒæ•´

src/components/SectionContent/  âœï¸ è½»å¾®è°ƒæ•´
â”œâ”€â”€ index.tsx - ç§»åŠ¨ç«¯æ¸²æŸ“ä¼˜åŒ–
â””â”€â”€ index.module.css - å“åº”å¼æ ·å¼è°ƒæ•´
```

#### éœ€è¦æ–°å¢çš„æ–‡ä»¶ï¼š

```
src/hooks/                      ğŸ†• æ–°å¢ Hooks
â”œâ”€â”€ useDeviceType.ts           # è®¾å¤‡ç±»å‹æ£€æµ‹
â”œâ”€â”€ useSwipeGesture.ts         # æ‰‹åŠ¿æ£€æµ‹ï¼ˆä¸‹æ»‘ã€ç‚¹å‡»ï¼‰
â””â”€â”€ useMobileNavigation.ts     # ç§»åŠ¨ç«¯å¯¼èˆªçŠ¶æ€ç®¡ç†

src/components/Mobile/          ğŸ†• æ–°å¢ç§»åŠ¨ç«¯ç»„ä»¶
â”œâ”€â”€ MobileLayout/
â”‚   â”œâ”€â”€ index.tsx              # ç§»åŠ¨ç«¯æ€»ä½“å¸ƒå±€å®¹å™¨
â”‚   â””â”€â”€ index.module.css       # ç§»åŠ¨ç«¯å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ MobileFirstPage/           # ç¬¬0é¡µ - ä¸ªäººä¿¡æ¯é¡µ
â”‚   â”œâ”€â”€ index.tsx              # å±•ç¤ºä¸ªäººä¿¡æ¯ã€ç¤¾äº¤å›¾æ ‡
â”‚   â””â”€â”€ index.module.css       # é¦–é¡µæ ·å¼ã€ä¸‹æ»‘æç¤ºåŠ¨ç”»
â”‚
â”œâ”€â”€ MobileGalgamePage/         # ç¬¬1-5é¡µ - å†…å®¹é¡µå®¹å™¨
â”‚   â”œâ”€â”€ index.tsx              # å¤ç”¨ GalgameSection é€»è¾‘
â”‚   â””â”€â”€ index.module.css       # ç§»åŠ¨ç«¯ Galgame æ ·å¼
â”‚
â”œâ”€â”€ MobileNavButton/           # å·¦ä¸‹è§’å¯¼èˆªæŒ‰é’®
â”‚   â”œâ”€â”€ index.tsx              # æµ®åŠ¨æŒ‰é’®é€»è¾‘
â”‚   â””â”€â”€ index.module.css       # æŒ‰é’®æ ·å¼ã€å®šä½
â”‚
â””â”€â”€ MobileMenu/                # å…¨å±å¯¼èˆªèœå•
    â”œâ”€â”€ index.tsx              # èœå•é€»è¾‘ã€è·¯ç”±è·³è½¬
    â””â”€â”€ index.module.css       # å…¨å±èœå•æ ·å¼ã€åŠ¨ç”»

src/styles/mobile/              ğŸ†• ç§»åŠ¨ç«¯æ ·å¼ç³»ç»Ÿ
â”œâ”€â”€ variables.css              # ç§»åŠ¨ç«¯ CSS å˜é‡
â”œâ”€â”€ animations.css             # å…±ç”¨åŠ¨ç”»å®šä¹‰
â””â”€â”€ utils.module.css           # å·¥å…·ç±»æ ·å¼
```

#### å…·ä½“æ–‡ä»¶å®ç°è¯´æ˜ï¼š

##### 1. **src/pages/[[...slug]].tsx** ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼‰
```typescript
// ä¸»è¦æ”¹åŠ¨ç‚¹ï¼š
// 1. å¼•å…¥è®¾å¤‡æ£€æµ‹
import { useDeviceType } from '../hooks/useDeviceType';
import MobileLayout from '../components/Mobile/MobileLayout';
import { BrowserView, MobileView, TabletView } from 'react-device-detect';

// 2. æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Hook æ¡ä»¶æ¸²æŸ“ï¼ˆæ¨èï¼‰
const IndexPage = ({ defaultSection, seo, structuredData }) => {
  const { isMobile, isTablet, isDesktop, isClient } = useDeviceType();
  const [isHydrated, setIsHydrated] = useState(false);

  // 3. å¤„ç†æ°´åˆé—®é¢˜
  useEffect(() => {
    setIsHydrated(true);
  }, []);

  if (!isHydrated) {
    // SSR é»˜è®¤æ¸²æŸ“ PC ç‰ˆï¼ˆSEO å‹å¥½ï¼‰
    return <DesktopLayout {...props} />;
  }

  // 4. æ ¹æ®è®¾å¤‡ç±»å‹æ¸²æŸ“
  if (isMobile || isTablet) {
    return <MobileLayout defaultSection={defaultSection} />;
  }

  // 5. ä¿ç•™ç°æœ‰ PC ç«¯ä»£ç 
  return <DesktopLayout {...props} />;
};

// æ–¹æ³•äºŒï¼šä½¿ç”¨ç»„ä»¶åŒ…è£…ï¼ˆæ›´ç®€æ´ï¼‰
const IndexPageAlternative = (props) => {
  return (
    <>
      <BrowserView>
        <DesktopLayout {...props} />
      </BrowserView>
      <MobileView>
        <MobileLayout {...props} />
      </MobileView>
      <TabletView>
        <MobileLayout {...props} />  {/* å¹³æ¿ä½¿ç”¨ç§»åŠ¨ç«¯å¸ƒå±€ */}
      </TabletView>
    </>
  );
};
```

##### 2. **src/components/Mobile/MobileLayout/index.tsx**
```typescript
// ç§»åŠ¨ç«¯å¸ƒå±€æ€»æ§åˆ¶å™¨
// è´Ÿè´£ï¼š
// - ç®¡ç†6ä¸ªè™šæ‹Ÿé¡µé¢çŠ¶æ€
// - å¤„ç†è·¯ç”±åŒæ­¥
// - åè°ƒé¡µé¢åˆ‡æ¢åŠ¨ç”»
// - æ•´åˆæ‰€æœ‰ç§»åŠ¨ç«¯ç»„ä»¶
```

##### 3. **src/components/Mobile/MobileFirstPage/index.tsx**
```typescript
// ç¬¬0é¡µå®ç°
// åŒ…å«ï¼š
// - ä¸ªäººä¿¡æ¯ï¼ˆå§“åã€èŒä½ã€ç®€ä»‹ï¼‰
// - ç¤¾äº¤å›¾æ ‡ç»„
// - ä¸‹æ»‘æç¤ºåŠ¨ç”»
// - æ‰‹åŠ¿æ£€æµ‹é€»è¾‘
```

##### 4. **src/components/Mobile/MobileGalgamePage/index.tsx**
```typescript
// ç¬¬1-5é¡µå®¹å™¨
// ç‰¹ç‚¹ï¼š
// - å¤ç”¨ç°æœ‰ GalgameSection ç»„ä»¶
// - é€‚é…ç§»åŠ¨ç«¯äº¤äº’ï¼ˆç‚¹å‡»ç»§ç»­ï¼‰
// - å¤„ç†é¡µé¢é—´è½¬åœºåŠ¨ç”»
```

##### 5. **src/hooks/useDeviceType.ts**
```typescript
// åŸºäº react-device-detect çš„å¢å¼ºç‰ˆè®¾å¤‡æ£€æµ‹ Hook
import { isMobileOnly, isTablet as isTabletDetect, isDesktop as isDesktopDetect } from 'react-device-detect';
import { useEffect, useState } from 'react';

export const useDeviceType = () => {
  const [isClient, setIsClient] = useState(false);
  const [windowWidth, setWindowWidth] = useState(
    typeof window !== 'undefined' ? window.innerWidth : 1024
  );

  useEffect(() => {
    setIsClient(true);

    // ç›‘å¬çª—å£å˜åŒ–ï¼ˆå“åº”å¼æ”¯æŒï¼‰
    const handleResize = () => setWindowWidth(window.innerWidth);
    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  // ç»“åˆè®¾å¤‡æ£€æµ‹å’Œçª—å£å¤§å°
  const isMobile = isClient && (isMobileOnly || windowWidth < 768);
  const isTablet = isClient && (isTabletDetect || (windowWidth >= 768 && windowWidth < 1024));
  const isDesktop = isClient && (isDesktopDetect || windowWidth >= 1024);

  return {
    isMobile,
    isTablet,
    isDesktop,
    isTouchDevice: isMobile || isTablet,
    isClient
  };
};
```

#### æ ·å¼æ–‡ä»¶ç»„ç»‡ï¼š

```scss
// ç§»åŠ¨ç«¯ä¸“ç”¨æ ·å¼å˜é‡
// src/styles/mobile/variables.css
:root {
  --mobile-spacing: 16px;
  --mobile-nav-height: 60px;
  --mobile-font-size-base: 16px;
  --mobile-transition: 0.3s ease;
}

// æ¯ä¸ªç§»åŠ¨ç«¯ç»„ä»¶çš„ CSS Module
// éµå¾ªå‘½åè§„èŒƒï¼š.mobile{ComponentName}
.mobileContainer { }
.mobileHeader { }
.mobileContent { }
```

#### ä¸éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼š

```
âœ… ä¿æŒä¸å˜ï¼š
- src/hooks/useConfig.ts
- src/context/ThemeContext.tsx
- src/utils/
- public/config/sections.json
- æ‰€æœ‰ PC ç«¯ç»„ä»¶ï¼ˆé™¤äº†å“åº”å¼æ ·å¼å¾®è°ƒï¼‰
```

#### å®æ–½ä¼˜å…ˆçº§ï¼š

1. **ğŸ”´ P0 - å¿…é¡»å®Œæˆ**
   - useDeviceType Hook
   - ä¿®æ”¹ [[...slug]].tsx
   - MobileLayout æ¡†æ¶
   - MobileFirstPageï¼ˆç¬¬0é¡µï¼‰

2. **ğŸŸ¡ P1 - æ ¸å¿ƒåŠŸèƒ½**
   - MobileGalgamePage
   - è·¯ç”±åŒæ­¥é€»è¾‘
   - é¡µé¢åˆ‡æ¢åŠ¨ç”»

3. **ğŸŸ¢ P2 - ä½“éªŒå¢å¼º**
   - MobileNavButton
   - MobileMenu
   - æ‰‹åŠ¿ä¼˜åŒ–
   - æ€§èƒ½ä¼˜åŒ–

#### æ¸è¿›å¼å®æ–½é¡ºåºï¼š

1. **ç¬¬ä¸€æ­¥**ï¼šåˆ›å»ºåŸºç¡€ Hooksï¼ˆuseDeviceTypeï¼‰
2. **ç¬¬äºŒæ­¥**ï¼šä¿®æ”¹ [[...slug]].tsx æ·»åŠ æ¡ä»¶æ¸²æŸ“
3. **ç¬¬ä¸‰æ­¥**ï¼šå®ç° MobileLayout å®¹å™¨
4. **ç¬¬å››æ­¥**ï¼šå¼€å‘ MobileFirstPage
5. **ç¬¬äº”æ­¥**ï¼šå¼€å‘ MobileGalgamePage
6. **ç¬¬å…­æ­¥**ï¼šæ·»åŠ å¯¼èˆªç³»ç»Ÿï¼ˆNavButton + Menuï¼‰
7. **ç¬¬ä¸ƒæ­¥**ï¼šæ ·å¼ä¼˜åŒ–å’ŒåŠ¨ç”»è°ƒè¯•

## åã€æ³¨æ„äº‹é¡¹

### 10.1 å…¼å®¹æ€§
- iOS Safari å®‰å…¨åŒºåŸŸé€‚é…
- Android å„ç§æµè§ˆå™¨æµ‹è¯•
- æ¨ªç«–å±åˆ‡æ¢å¤„ç†

### 10.2 æ— éšœç¢
- ä¿ç•™é”®ç›˜å¯¼èˆªæ”¯æŒ
- ARIA æ ‡ç­¾å®Œå–„
- å¯¹æ¯”åº¦æ»¡è¶³ WCAG 2.1 AA æ ‡å‡†

### 10.3 SEOè€ƒè™‘
- ä¿æŒ SSG/SSR æ¸²æŸ“
- ç»“æ„åŒ–æ•°æ®ä¿ç•™
- ç§»åŠ¨ç«¯ä¸“å± meta æ ‡ç­¾
- **ç¡®ä¿ PC/H5 ç«¯ URL ä¸€è‡´æ€§**
- ä¿æŒ SSG/SSR æ¸²æŸ“
- ç»“æ„åŒ–æ•°æ®ä¿ç•™
- ç§»åŠ¨ç«¯ä¸“å± meta æ ‡ç­¾

## åä¸€ã€æµ‹è¯•æ¸…å•

### åŠŸèƒ½æµ‹è¯•
- [ ] é¦–é¡µä¸‹æ»‘è§¦å‘
- [ ] Galgame ç‚¹å‡»åˆ‡æ¢
- [ ] å¯¼èˆªèœå•åŠŸèƒ½
- [ ] ä¸»é¢˜åˆ‡æ¢
- [ ] å¿«é€Ÿè·³è½¬

### æ€§èƒ½æµ‹è¯•
- [ ] é¦–å±åŠ è½½æ—¶é—´ < 3s
- [ ] åŠ¨ç”»æµç•…åº¦ 60fps
- [ ] å†…å­˜å ç”¨åˆç†

### å…¼å®¹æ€§æµ‹è¯•
- [ ] iOS 14+
- [ ] Android 8+
- [ ] ä¸»æµæµè§ˆå™¨

## åäºŒã€å…³é”®å®ç°è¦ç‚¹

### 12.1 é¿å…è·¯ç”±åˆ†è£‚
- **ä¸è¦**ï¼šä¸ºç§»åŠ¨ç«¯åˆ›å»ºæ–°çš„è·¯ç”±
- **è¦**ï¼šåœ¨åŒä¸€è·¯ç”±ä¸‹æ ¹æ®è®¾å¤‡æ¸²æŸ“ä¸åŒç»„ä»¶

### 12.2 æ•°æ®å…±äº«
```typescript
// ä½¿ç”¨ç›¸åŒçš„æ•°æ®æº
const { config } = useConfig();

// PC ç«¯å’Œ H5 ç«¯å…±äº«åŒä¸€ä»½é…ç½®
const sections = config.sections;
const navigation = config.navigation;
```

### 12.3 SEO å‹å¥½
- æœåŠ¡ç«¯é»˜è®¤æ¸²æŸ“ PC ç‰ˆæœ¬ï¼ˆæ›´å…¨é¢çš„å†…å®¹ï¼‰
- å®¢æˆ·ç«¯æ ¹æ®è®¾å¤‡ç±»å‹åˆ‡æ¢åˆ°ç›¸åº”ç‰ˆæœ¬
- ä¿æŒ URL ç»“æ„ä¸å˜ï¼Œåˆ©äº SEO

### 12.4 ç§»åŠ¨ç«¯è·¯ç”±ç‰¹æ®Šå¤„ç†
```typescript
// ç§»åŠ¨ç«¯è·¯ç”±æ˜ å°„å…³ç³»
// ç¬¬0é¡µå’Œç¬¬1é¡µå…±äº«é¦–é¡µè·¯ç”± '/'
// è¿™æ ·åšçš„åŸå› ï¼š
// 1. ç¬¬0é¡µæ˜¯çº¯å±•ç¤ºé¡µï¼Œä¸åŒ…å«å®é™…å†…å®¹
// 2. ç¬¬1é¡µï¼ˆå…³äºæˆ‘ï¼‰æ˜¯é»˜è®¤å†…å®¹é¡µï¼Œå¯¹åº” PC ç«¯çš„é»˜è®¤ section
// 3. ä¿æŒ URL ç®€æ´æ€§å’Œè¯­ä¹‰æ­£ç¡®æ€§

// å¤„ç†è¾¹ç•Œæƒ…å†µ
const handleMobileRouting = () => {
  // åœºæ™¯1ï¼šç”¨æˆ·ç›´æ¥è®¿é—® '/'
  // -> ç§»åŠ¨ç«¯æ˜¾ç¤ºç¬¬1é¡µï¼ˆå…³äºæˆ‘ï¼‰ï¼Œå¯ä»¥å‘ä¸Šè¿”å›ç¬¬0é¡µ

  // åœºæ™¯2ï¼šç”¨æˆ·åˆ†äº«äº†æŸä¸ªå…·ä½“é¡µé¢å¦‚ '/experience'
  // -> ç§»åŠ¨ç«¯ç›´æ¥å®šä½åˆ°å¯¹åº”é¡µé¢ï¼Œä»å¯é€šè¿‡å¯¼èˆªè®¿é—®å…¶ä»–é¡µé¢

  // åœºæ™¯3ï¼šä»ç¬¬0é¡µä¸‹æ»‘åˆ°ç¬¬1é¡µ
  // -> URL ä¿æŒä¸º '/'ï¼Œç¬¦åˆç”¨æˆ·é¢„æœŸ
};
```

### 12.5 æ¸è¿›å¼å¢å¼º
1. å…ˆç¡®ä¿ PC ç«¯æ­£å¸¸å·¥ä½œ
2. æ£€æµ‹åˆ°ç§»åŠ¨è®¾å¤‡æ—¶å¢å¼ºä½“éªŒ
3. ä¸æ”¯æŒçš„åŠŸèƒ½ä¼˜é›…é™çº§

## åä¸‰ã€åç»­ä¼˜åŒ–æ–¹å‘

1. **æ‰‹åŠ¿å¢å¼º**: æ·»åŠ å·¦å³æ»‘åŠ¨åˆ‡æ¢ç« èŠ‚
2. **ç¦»çº¿æ”¯æŒ**: PWA ç¦»çº¿ç¼“å­˜
3. **åŠ¨æ€ä¸»é¢˜**: æ ¹æ®æ—¶é—´è‡ªåŠ¨åˆ‡æ¢
4. **é˜…è¯»è¿›åº¦**: æ˜¾ç¤ºå½“å‰é˜…è¯»ä½ç½®
5. **åˆ†äº«åŠŸèƒ½**: ç¤¾äº¤åª’ä½“åˆ†äº«å¡ç‰‡ç”Ÿæˆ